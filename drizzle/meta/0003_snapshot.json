{
  "version": "5",
  "dialect": "mysql",
  "id": "3947bd9c-d7ef-453d-885d-63554c725e4d",
  "prevId": "fd6c1b4d-396e-4d74-a848-707330e887fd",
  "tables": {
    "analysis_results": {
      "name": "analysis_results",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "upload_id": {
          "name": "upload_id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "investment_type": {
          "name": "investment_type",
          "type": "enum('low_carbon','decarbonizing','solutions')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "date": {
          "name": "date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "geography": {
          "name": "geography",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "sector": {
          "name": "sector",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "avg_carbon_intensity": {
          "name": "avg_carbon_intensity",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "avg_pe_ratio": {
          "name": "avg_pe_ratio",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "valuation_premium": {
          "name": "valuation_premium",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "implied_carbon_price": {
          "name": "implied_carbon_price",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "implied_decarb_rate": {
          "name": "implied_decarb_rate",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "portfolio_size": {
          "name": "portfolio_size",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "upload_date_idx": {
          "name": "upload_date_idx",
          "columns": [
            "upload_id",
            "date"
          ],
          "isUnique": false
        },
        "investment_type_idx": {
          "name": "investment_type_idx",
          "columns": [
            "investment_type"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "analysis_results_id": {
          "name": "analysis_results_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "carbon_price_cache": {
      "name": "carbon_price_cache",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "upload_id": {
          "name": "upload_id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "date": {
          "name": "date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "method": {
          "name": "method",
          "type": "enum('absolute','sector_relative')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "include_scope3": {
          "name": "include_scope3",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "winsorize": {
          "name": "winsorize",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "winsorize_percentile": {
          "name": "winsorize_percentile",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "top_tercile_emissions": {
          "name": "top_tercile_emissions",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "top_tercile_profit": {
          "name": "top_tercile_profit",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "top_tercile_market_cap": {
          "name": "top_tercile_market_cap",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "top_tercile_pe_ratio": {
          "name": "top_tercile_pe_ratio",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "top_tercile_company_count": {
          "name": "top_tercile_company_count",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "bottom_tercile_emissions": {
          "name": "bottom_tercile_emissions",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "bottom_tercile_profit": {
          "name": "bottom_tercile_profit",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "bottom_tercile_market_cap": {
          "name": "bottom_tercile_market_cap",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "bottom_tercile_pe_ratio": {
          "name": "bottom_tercile_pe_ratio",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "bottom_tercile_company_count": {
          "name": "bottom_tercile_company_count",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "implied_carbon_price": {
          "name": "implied_carbon_price",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "carbon_price_cache_id": {
          "name": "carbon_price_cache_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "upload_date_method_params_idx": {
          "name": "upload_date_method_params_idx",
          "columns": [
            "upload_id",
            "date",
            "method",
            "include_scope3",
            "winsorize",
            "winsorize_percentile"
          ]
        }
      },
      "checkConstraint": {}
    },
    "companies": {
      "name": "companies",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "isin": {
          "name": "isin",
          "type": "varchar(12)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "geography": {
          "name": "geography",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "sector": {
          "name": "sector",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "industry": {
          "name": "industry",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "sdg_alignment_score": {
          "name": "sdg_alignment_score",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "emission_target_2050": {
          "name": "emission_target_2050",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "isin_idx": {
          "name": "isin_idx",
          "columns": [
            "isin"
          ],
          "isUnique": false
        },
        "geography_idx": {
          "name": "geography_idx",
          "columns": [
            "geography"
          ],
          "isUnique": false
        },
        "sector_idx": {
          "name": "sector_idx",
          "columns": [
            "sector"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "companies_id": {
          "name": "companies_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "companies_isin_unique": {
          "name": "companies_isin_unique",
          "columns": [
            "isin"
          ]
        }
      },
      "checkConstraint": {}
    },
    "company_terciles": {
      "name": "company_terciles",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "upload_id": {
          "name": "upload_id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "company_id": {
          "name": "company_id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "date": {
          "name": "date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "method": {
          "name": "method",
          "type": "enum('absolute','sector_relative')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "include_scope3": {
          "name": "include_scope3",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "carbon_intensity": {
          "name": "carbon_intensity",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "tercile_assignment": {
          "name": "tercile_assignment",
          "type": "enum('bottom','middle','top')",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "upload_date_idx": {
          "name": "upload_date_idx",
          "columns": [
            "upload_id",
            "date"
          ],
          "isUnique": false
        },
        "tercile_idx": {
          "name": "tercile_idx",
          "columns": [
            "tercile_assignment"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "company_terciles_id": {
          "name": "company_terciles_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "upload_company_date_method_idx": {
          "name": "upload_company_date_method_idx",
          "columns": [
            "upload_id",
            "company_id",
            "date",
            "method",
            "include_scope3"
          ]
        }
      },
      "checkConstraint": {}
    },
    "data_uploads": {
      "name": "data_uploads",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "user_id": {
          "name": "user_id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "filename": {
          "name": "filename",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "file_key": {
          "name": "file_key",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "file_url": {
          "name": "file_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "enum('processing','completed','failed')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'processing'"
        },
        "companies_count": {
          "name": "companies_count",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "time_periods_count": {
          "name": "time_periods_count",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "completedAt": {
          "name": "completedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "user_id_idx": {
          "name": "user_id_idx",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        },
        "status_idx": {
          "name": "status_idx",
          "columns": [
            "status"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "data_uploads_id": {
          "name": "data_uploads_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "time_series": {
      "name": "time_series",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "company_id": {
          "name": "company_id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "date": {
          "name": "date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "total_return_index": {
          "name": "total_return_index",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "market_cap": {
          "name": "market_cap",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "price_earnings": {
          "name": "price_earnings",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "scope1_emissions": {
          "name": "scope1_emissions",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "scope2_emissions": {
          "name": "scope2_emissions",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "scope3_emissions": {
          "name": "scope3_emissions",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "net_profit": {
          "name": "net_profit",
          "type": "float",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "date_idx": {
          "name": "date_idx",
          "columns": [
            "date"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "time_series_id": {
          "name": "time_series_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "company_date_idx": {
          "name": "company_date_idx",
          "columns": [
            "company_id",
            "date"
          ]
        }
      },
      "checkConstraint": {}
    },
    "users": {
      "name": "users",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "openId": {
          "name": "openId",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "email": {
          "name": "email",
          "type": "varchar(320)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "loginMethod": {
          "name": "loginMethod",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "role": {
          "name": "role",
          "type": "enum('user','admin')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'user'"
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        },
        "lastSignedIn": {
          "name": "lastSignedIn",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "users_id": {
          "name": "users_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "users_openId_unique": {
          "name": "users_openId_unique",
          "columns": [
            "openId"
          ]
        }
      },
      "checkConstraint": {}
    }
  },
  "views": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {},
    "indexes": {}
  }
}